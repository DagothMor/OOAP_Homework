Абстрактное множество создал правильно, наследовав от абстрактной хэш таблицы, я добавил лишь 4 запроса.